<div class="claim">
	<div class="row-fluid">
		<div class="span4 offset1" data-ng-init="loadRefs()">
			<form class="form-horizontal well well-small" data-ng-submit="save()">
				<div class="control-group">
					<label class="control-label" for="missionId">Mission <i class="icon-mandatory"></i></label>

					<div class="controls">
						<select class="input-medium" name="missionId" id="missionId" data-ng-model="form.missionId" required="required" data-ng-options="m.id as m.code for m in missions">
							<option value=""></option>
						</select>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="date">Le <i class="icon-mandatory"></i></label>

					<div class="controls">
						<input type="text" class="input-small" data-b-datepicker id="date" data-ng-model="form.date" required="required">
					</div>
				</div>
				<hr>
				<h6>Frais</h6>

				<div class="control-group">
					<label class="control-label" for="type">Type</label>

					<div class="controls">
						<select class="input-medium" id="type" data-ng-model="form.claimType" data-ng-options="ct.code as ct.label for ct in claimsType">
							<option value=""></option>
						</select>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="amount">Montant </label>

					<div class="controls">
						<div class="input-append">
							<input type="text" class="input-mini" data-ng-model="form.amount" id="amount" pattern="\d{1,4}([,.]\d{0,2})?"><span class="add-on">€</span>
						</div>
					</div>
				</div>
				<hr>
				<h6>Déplacement</h6>

				<div class="control-group">
					<label class="control-label" for="kilometer">Nombre de Km </label>

					<div class="controls">
						<div class="input-append">

							<input type="text" class="input-mini" data-ng-model="form.kilometer" id="kilometer" pattern="\d{1,4}([.]\d{0,2})?"><span class="add-on"><i class="icon-road"></i></span>
						</div>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="journey">Destination</label>

					<div class="controls">
						<input type="text" class="" id="journey" data-ng-model="form.journey">
					</div>
				</div>
				<hr>
				<div class="control-group">
					<label class="control-label" for="comment">Commentaire</label>

					<div class="controls">
						<textarea class="input-block-level" id="comment" data-ng-model="form.comment" rows="3"></textarea>
					</div>
				</div>
				<div class="control-group">
					<div class="controls pull-right">
						<button type="submit" class="btn btn-primary" id="btnValidate" name="btnValidate">Valider</button>
						<input type="reset" class="btn" id="btnReset" value="Effacer">
					</div>
				</div>
			</form>
		</div>
		<div class="span6" data-ng-init="loadHistory()">
			<div class="row-fluid well well-small">
				<div class="span7">
					Filtre
					<select class="span3" data-ng-model="filter.year" data-ng-change="filterChange()">
						<option value="2012">2012</option>
						<option value="2013">2013</option>
						<option value="2014">2014</option>
					</select>
					/
					<select class="span5" data-ng-model="filter.month" data-ng-options="m.id as m.label for m in months" data-ng-change="filterChange()">
					</select>
				</div>
				<div class="span4 offset1">
					Tri
					<select class="span6" data-ng-model="filter.sortBy" data-ng-options="s.key as s.label for s in sortBys" data-ng-change="sortByChange()">
						<option value="date">Date</option>
						<option value="mission.code">Mission</option>
						<option value="claimType">Type</option>
					</select>
				</div>
			</div>
			<div class="row-fluid">
				<div class="span12 scrollable">
					<div class="row-fluid" data-ng-repeat="claim in history">
						<div class="span10">
							<span>Mission : {{claim.mission.code}} le {{claim.date | date}}</span><br>
							<span data-ng-show="claim.amount">Frais : {{claim.claimType | capitalize}} <strong>{{claim.amount | currency}}</strong><br></span>
							<span data-ng-show="claim.kilometerAmount">Trajet : {{claim.kilometer | kilometer}} - {{claim.journey}} | <strong>{{claim.kilometerAmount | currency}}</strong></span><br>
							<strong class="pull-right">Total : {{claim.totalClaim | currency}}</strong><br>
						</div>
						<div class="span1">
							<i data-ng-class="{'icon-comment': true, 'icon-comment-alt': false}"></i>
						</div>
						<div class="span1">
							<button class="btn btn-danger btn-mini" data-ng-click="delete(claim.id)"><i class="icon-trash"></i></button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


